{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\The-Amazing-App\\\\web-app\\\\src\\\\Components\\\\DashBoard\\\\DashBoardHomeMap\\\\DashHomeMap.js\";\nimport React from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport \"@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css\";\nimport \"../styles.css\";\nmapboxgl.accessToken = \"pk.eyJ1IjoidGFwZWhuZGhsb3Z1IiwiYSI6ImNrYmV2eTRhdDBwbXUydHA4eTl6cW5neDMifQ.BVjVIq7FUmlnMZJC_BvRDQ\";\nlet slideLat = 0;\nlet slideLong = 0;\n\nclass DashHomeMap extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lng: 28.229271,\n      lat: -25.747868,\n      zoom: 10,\n      games: null\n    };\n    this.mapContainer = React.createRef();\n  }\n\n  componentDidMount() {\n    db.collection(\"projects\").get().then(snapshot => {\n      const games = [];\n      snapshot.forEach(doc => {\n        const data = doc.data();\n        games.push(data);\n      });\n      this.setState({\n        games: games\n      }); //console.log(snapshot.docs[1]._document.proto.fields.location[0]);\n      //console.log(games[0].properties[0].location);\n    });\n    const map = new mapboxgl.Map({\n      container: this.mapContainer.current,\n      style: \"mapbox://styles/mapbox/streets-v11\",\n      center: [this.state.lng, this.state.lat],\n      zoom: this.state.zoom\n    });\n    let title = document.getElementById(\"location-title\");\n    let description = document.getElementById(\"location-description\");\n    let locations = [{\n      title: games[0].name,\n      description: \"Octopus is a game where you need to solve riddles about plants and animals that live in water.\",\n      camera: {\n        center: [28.2441, -25.7792],\n        zoom: 14.21,\n        pitch: 50\n      }\n    }, {\n      title: \"Detective\",\n      description: \"Play the detective role by solving riddles related to a crime that had recently happened.\",\n      camera: {\n        center: [28.203, -25.7453],\n        bearing: 25.3,\n        zoom: 14.5\n      }\n    }];\n\n    function playback(index) {\n      title.textContent = locations[index].title;\n      description.textContent = locations[index].description;\n      slideLong = locations[index].camera.center[0];\n      slideLat = locations[index].camera.center[1];\n      let marker = new mapboxgl.Marker().setLngLat([slideLong, slideLat]).addTo(map);\n      map.flyTo(locations[index].camera);\n      map.once(\"moveend\", () => {\n        window.setTimeout(function () {\n          //move to the next one\n          index = index + 1 === locations.length ? 0 : index + 1;\n          marker.remove();\n          playback(index);\n        }, 10000); //3 seconds.\n      });\n    }\n\n    title.textContent = locations[locations.length - 1].title;\n    description.textContent = locations[locations.length - 1].description;\n    map.on(\"load\", () => {\n      playback(0);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.mapContainer,\n      className: \"mapContainer\",\n      id: \"mapp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"map-overlay-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"map-overlay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      id: \"location-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      id: \"location-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default DashHomeMap;","map":{"version":3,"sources":["C:/Users/User/Documents/GitHub/The-Amazing-App/web-app/src/Components/DashBoard/DashBoardHomeMap/DashHomeMap.js"],"names":["React","mapboxgl","accessToken","slideLat","slideLong","DashHomeMap","Component","constructor","props","state","lng","lat","zoom","games","mapContainer","createRef","componentDidMount","db","collection","get","then","snapshot","forEach","doc","data","push","setState","map","Map","container","current","style","center","title","document","getElementById","description","locations","name","camera","pitch","bearing","playback","index","textContent","marker","Marker","setLngLat","addTo","flyTo","once","window","setTimeout","length","remove","on","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport \"@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css\";\r\nimport \"../styles.css\";\r\n\r\nmapboxgl.accessToken =\r\n  \"pk.eyJ1IjoidGFwZWhuZGhsb3Z1IiwiYSI6ImNrYmV2eTRhdDBwbXUydHA4eTl6cW5neDMifQ.BVjVIq7FUmlnMZJC_BvRDQ\";\r\nlet slideLat = 0;\r\nlet slideLong = 0;\r\n\r\nclass DashHomeMap extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      lng: 28.229271,\r\n      lat: -25.747868,\r\n      zoom: 10,\r\n      games: null,\r\n    };\r\n    this.mapContainer = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    db.collection(\"projects\")\r\n      .get()\r\n      .then((snapshot) => {\r\n        const games = [];\r\n        snapshot.forEach((doc) => {\r\n          const data = doc.data();\r\n          games.push(data);\r\n        });\r\n        this.setState({ games: games });\r\n        //console.log(snapshot.docs[1]._document.proto.fields.location[0]);\r\n        //console.log(games[0].properties[0].location);\r\n      });\r\n\r\n    const map = new mapboxgl.Map({\r\n      container: this.mapContainer.current,\r\n      style: \"mapbox://styles/mapbox/streets-v11\",\r\n      center: [this.state.lng, this.state.lat],\r\n      zoom: this.state.zoom,\r\n    });\r\n\r\n    let title = document.getElementById(\"location-title\");\r\n    let description = document.getElementById(\"location-description\");\r\n\r\n    let locations = [\r\n      {\r\n        title: games[0].name,\r\n        description:\r\n          \"Octopus is a game where you need to solve riddles about plants and animals that live in water.\",\r\n        camera: {\r\n          center: [28.2441, -25.7792],\r\n          zoom: 14.21,\r\n          pitch: 50,\r\n        },\r\n      },\r\n      {\r\n        title: \"Detective\",\r\n        description:\r\n          \"Play the detective role by solving riddles related to a crime that had recently happened.\",\r\n        camera: {\r\n          center: [28.203, -25.7453],\r\n          bearing: 25.3,\r\n          zoom: 14.5,\r\n        },\r\n      },\r\n    ];\r\n\r\n    function playback(index) {\r\n      title.textContent = locations[index].title;\r\n      description.textContent = locations[index].description;\r\n      slideLong = locations[index].camera.center[0];\r\n      slideLat = locations[index].camera.center[1];\r\n\r\n      let marker = new mapboxgl.Marker()\r\n        .setLngLat([slideLong, slideLat])\r\n        .addTo(map);\r\n      map.flyTo(locations[index].camera);\r\n      map.once(\"moveend\", () => {\r\n        window.setTimeout(function () {\r\n          //move to the next one\r\n          index = index + 1 === locations.length ? 0 : index + 1;\r\n          marker.remove();\r\n          playback(index);\r\n        }, 10000); //3 seconds.\r\n      });\r\n    }\r\n\r\n    title.textContent = locations[locations.length - 1].title;\r\n    description.textContent = locations[locations.length - 1].description;\r\n\r\n    map.on(\"load\", () => {\r\n      playback(0);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div ref={this.mapContainer} className=\"mapContainer\" id=\"mapp\"></div>\r\n        <div class=\"map-overlay-container\">\r\n          <div class=\"map-overlay\">\r\n            <h4 id=\"location-title\"></h4>\r\n            <p id=\"location-description\"></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DashHomeMap;\r\n"]},"metadata":{},"sourceType":"module"}